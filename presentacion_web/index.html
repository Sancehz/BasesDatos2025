<h1>Pruebas</h1>
<h2>POST params:</h2>
Nombre: <input type="text" id="nombre-empl"> <br>
Salario: <input type="number" id="salario-empl"> <br>
<button id="balbo" onclick="postInsertarEmpleado()">Enviar POST</button>
<p id="post-response"></p>

<h2>GET response:</h2>
<button onclick="getQueryEmpleados()">Actualizar</button>
<p id="get-response"></p>

<script>

var apiUrl = window.location.origin + "/api/";

function getQueryEmpleados() {
	document.getElementById("get-response").innerText = "";
	fetch(apiUrl, {method: "GET"})
	.then(response=> response.json())
	.then(json => {
		console.log(json);
	
		for(empleado of json.empleados) {
			document.getElementById("get-response").innerText += `${empleado.Id}, ${empleado.Nombre}, ${empleado.Salario} \n`;
		}
	})
}

function postInsertarEmpleado() {
	var nSalario = parseFloat(document.getElementById("salario-empl").value);
	var nNombre = document.getElementById("nombre-empl").value;

	fetch(apiUrl, {
		method: "POST",
		body: JSON.stringify({
			Nombre: nNombre,
			Salario: nSalario,
		}),
		headers: {
			"Content-type": "application/json; charset=UTF-8"
		},
	})
	.then(response=> response.json())
	.then(json => {
		console.log(json);

		document.getElementById("post-response").innerText = json.state;
	})
}

getQueryEmpleados()
</script>